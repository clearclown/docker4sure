#!/bin/bash
# docker4sure: Execute real Docker Compose directly
set -euo pipefail

DOCKER_BIN="/usr/bin/docker"

if [[ "$(uname -s)" == "Darwin" ]]; then
    if [[ -x "/usr/local/bin/docker" ]]; then
        DOCKER_BIN="/usr/local/bin/docker"
    elif [[ -x "/opt/homebrew/bin/docker" ]]; then
        DOCKER_BIN="/opt/homebrew/bin/docker"
    fi
fi

if [[ ! -x "$DOCKER_BIN" ]]; then
    echo "Error: Real Docker binary not found at $DOCKER_BIN" >&2
    exit 1
fi

exec "$DOCKER_BIN" compose "$@"
